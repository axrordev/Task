@using TaskAdmin.Web.Models.Users
@model IEnumerable<UserViewModel>


@{
    ViewData["Title"] = "Home Page";
}
@* <!-- Block Form -->
<form id="blockForm" method="post" action="/Home/BlockUsers" style="display: none;">
    <input type="hidden" name="selectedUserIds" id="blockUserIds" />
</form>

<!-- Unblock Form -->
<form id="unblockForm" method="post" action="/Home/UnblockUsers" style="display: none;">
    <input type="hidden" name="selectedUserIds" id="unblockUserIds" />
</form>

<!-- Delete Form -->
<form id="deleteForm" method="post" action="/Home/DeleteUsers">
    <input type="hidden" name="selectedUserIds" id="deleteUserIds" />
</form>

<!-- Main Form with Buttons -->
<div class="d-flex justify-content-between">
    <div>
        <button type="button" class="btn btn-secondary" id="blockButton"><i style="margin-right:5px" class="fa-solid fa-lock"></i>Block</button>
        <button type="button" class="btn btn-secondary" id="unblockButton"><i class="fa-solid fa-unlock"></i></button>
        <button type="submit" form="deleteForm" class="btn btn-danger"><i class="fa-solid fa-trash-can"></i></button>
    </div>
</div>

<table class="table">
    <thead>
        <tr>
            <th>
                <input type="checkbox" id="selectAll" />
            </th>
            <th>Name</th>
            <th>Email</th>
            <th>Last Login</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in Model)
        {
            <tr>
                <td>
                    <input type="checkbox" name="selectedUserIds" value="@user.Id" class="user-checkbox" />
                </td>
                <td>@user.Name</td>
                <td>@user.Email</td>
                <td>@user.LastLoginTime?.ToString("HH:mm:ss, d MMM, yyyy")</td>
                <td>@(user.IsBlocked ? "Blocked" : "Active")</td>
            </tr>
        }
    </tbody>
</table>
 *@
@* 
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selectAllCheckbox = document.getElementById('selectAll');
        const userCheckboxes = document.querySelectorAll('.user-checkbox');
        const blockButton = document.getElementById('blockButton');
        const unblockButton = document.getElementById('unblockButton');
        const deleteButton = document.getElementById('deleteButton');

        // Select/Deselect All Checkboxes
        selectAllCheckbox.addEventListener('change', function () {
            userCheckboxes.forEach(function (checkbox) {
                checkbox.checked = selectAllCheckbox.checked;
            });
        });

        // Gather Selected User IDs
        function getSelectedUserIds() {
            let selectedUserIds = [];
            userCheckboxes.forEach(function (checkbox) {
                if (checkbox.checked) {
                    selectedUserIds.push(checkbox.value);
                }
            });
            return selectedUserIds.join(',');
        }

        // Block Button Click
        blockButton.addEventListener('click', function () {
            const selectedUserIds = getSelectedUserIds();
            if (selectedUserIds) {
                document.getElementById('blockUserIds').value = selectedUserIds;
                document.getElementById('blockForm').submit();
            }
        });

        // Unblock Button Click
        unblockButton.addEventListener('click', function () {
            const selectedUserIds = getSelectedUserIds();
            if (selectedUserIds) {
                document.getElementById('unblockUserIds').value = selectedUserIds;
                document.getElementById('unblockForm').submit();
            }
        });

        // Delete Button Click
        deleteButton.addEventListener('click', function () {
            const selectedUserIds = getSelectedUserIds();
            if (selectedUserIds) {
                document.getElementById('deleteUserIds').value = selectedUserIds;
            }
        });
    });
</script> *@




<form method="post" action="/Home/DeleteUsers">
    <div class="d-flex justify-content-between">
        <div>
            <button class="btn btn-secondary">Block</button>
            <button class="btn btn-secondary"> <i class="fa-solid fa-unlock"></i></button>
            <button type="submit" class="btn btn-danger"><i class="fa-solid fa-trash-can"></i></button>
        </div>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th>
                    <input type="checkbox" id="selectAll" />
                </th>
                <th>Name</th>
                <th>Email</th>
                <th>Last Login</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>
                        <input type="checkbox" name="selectedUserIds" value="@user.Id" />
                    </td>
                    <td>@user.Name</td>
                    <td>@user.Email</td>
                    <td>@user.LastLoginTime?.ToString("HH:mm:ss, d MMM, yyyy")</td>
                    <td>@(user.IsBlocked ? "Blocked" : "Active")</td>
                </tr>
            }
        </tbody>
    </table>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selectAllCheckbox = document.getElementById('selectAll');
        const checkboxes = document.querySelectorAll('table tbody input[type="checkbox"]');

        selectAllCheckbox.addEventListener('change', function () {
            checkboxes.forEach(function (checkbox) {
                checkbox.checked = selectAllCheckbox.checked;
            });
        });
    });
</script>






